# ultralytics/cfg/hyp_visdrone_noaug.yaml
# VisDrone专用超参数配置 - 无数据增强版本
# 专注于网络本体优化，关闭所有数据增强

# 学习率设置
lr0: 0.001          # 初始学习率 (AdamW优化器适用)
lrf: 0.01           # 最终学习率比例 (lr0 * lrf)
momentum: 0.9       # SGD动量 / Adam beta1
weight_decay: 0.0005  # 权重衰减 (L2正则化)

# 损失函数权重
box: 7.5           # 边界框损失权重 (提高回归精度)
cls: 0.5           # 分类损失权重
dfl: 1.5           # DFL损失权重
pose: 12.0         # 关键点损失权重 (如使用)
kobj: 2.0          # 关键点目标性权重
label_smoothing: 0.0  # 标签平滑 (设为0，使用DSLA软标签)

# 数据增强 - 全部关闭以专注网络优化
hsv_h: 0.0         # 色调增强幅度 (关闭)
hsv_s: 0.0         # 饱和度增强幅度 (关闭)  
hsv_v: 0.0         # 明度增强幅度 (关闭)
degrees: 0.0       # 随机旋转角度 (关闭)
translate: 0.0     # 随机平移比例 (关闭)
scale: 0.0         # 随机缩放幅度 (关闭)
shear: 0.0         # 随机剪切角度 (关闭)
perspective: 0.0   # 随机透视变换 (关闭)
flipud: 0.0        # 上下翻转概率 (关闭)
fliplr: 0.0        # 左右翻转概率 (关闭，保持VisDrone航拍方向一致性)
mosaic: 0.0        # Mosaic增强概率 (关闭)
mixup: 0.0         # MixUp增强概率 (关闭)
copy_paste: 0.0    # Copy-Paste增强概率 (关闭)

# 超分辨率和细节增强 (关闭外部增强，依赖网络内在能力)
sr_ratio: 0.0      # 超分辨率比例 (关闭)
blur_ratio: 0.0    # 模糊增强比例 (关闭)

# 训练策略
warmup_epochs: 3.0    # 预热轮数
warmup_momentum: 0.8  # 预热动量
warmup_bias_lr: 0.1   # 预热偏置学习率
close_mosaic: 0       # 关闭Mosaic的轮数 (已全程关闭)

# 损失函数特殊配置
focal_loss: True      # 使用Focal Loss处理样本不平衡
focal_alpha: 0.25     # Focal Loss alpha参数
focal_gamma: 2.0      # Focal Loss gamma参数
shape_iou: True       # 使用Shape-IoU损失
dsla_gamma: 2.0       # DSLA软标签参数

# 小目标检测专用配置
small_obj_weight: 2.0    # 小目标额外权重
multi_scale_loss: True   # 多尺度损失
atss_matching: True      # 使用ATSS样本匹配

# NMS配置 (推理时)
conf: 0.25            # 置信度阈值 (VisDrone调优值)
iou: 0.6              # NMS IoU阈值 (防止小目标被误删)
max_det: 1000         # 最大检测数量 (VisDrone场景)

# 验证配置
val: True             # 训练时是否验证
plots: True           # 是否生成训练图表
save_json: False      # 是否保存COCO格式结果

# 设备和性能配置
amp: True             # 自动混合精度训练
profile: False        # 性能分析
deterministic: False  # 确定性训练 (关闭以获得更好性能)